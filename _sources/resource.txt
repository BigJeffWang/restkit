.. _resource_ref:

Resource
========

.. module:: restkit

This module provides a common interface for all HTTP requests.

Example: 

    >>> from restkit import Resource
    >>> res = Resource('http://friendpaste.com')
    >>> res.get('/5rOqE9XTz7lccLgZoQS4IP',headers={'Accept': 'application/json'}).body
    u'{"snippet": "hi!", "title": "", "id": "5rOqE9XTz7lccLgZoQS4IP", "language": "text", "revision": "386233396230"}'
    >>> res.get('/5rOqE9XTz7lccLgZoQS4IP',headers={'Accept': 'application/json'}).status_int
    200
    
Data returned are `restkit.HTTPResponse` instance. 

Resource class
--------------

.. autoclass:: restkit.rest.Resource

    **Properties**

    .. attribute:: uri

        Str, full uri to the server.

    .. attribute:: transport

        Any instance of object based on `restkit.httpc.HTTPClient`.


    **Methods**

    .. automethod:: restkit.rest.Resource.clone

    .. automethod:: restkit.rest.Resource.__call__

    .. automethod:: restkit.rest.Resource.get

    .. automethod:: restkit.rest.Resource.head

    .. automethod:: restkit.rest.Resource.delete

    .. automethod:: restkit.rest.Resource.post

    .. automethod:: restkit.rest.Resource.put
    
    .. automethod:: restkit.rest.Resource.request

    .. automethod:: restkit.rest.Resource.update_uri

RestClient class
----------------

RestClient represent a simple HTTP client. **New in 1.1** By default all urls are utf8
encoded. But you could change default charset, safe characters and
decide that keys don't need to be encoded.

.. autoclass:: restkit.rest.RestClient

    

    **Properties**

    .. attribute:: transport

        Any http instance of object based on 
        `restkit.httpc.HttpClient`. By default it will use 
        `restkit.httpc.ProxiedHttpClient that support simple proxy auth.

    .. describe:: charset
        
        By default it's 'utf-8', it define charset of urls.

    .. describe:: encode_keys

        By default True. Encode params keys

    .. describe:: safe

        By default is ":/", define which charaters are safe in url and
        don't need to be encoded.


    **Methods**

    .. automethod:: restkit.rest.RestClient.get

    .. automethod:: restkit.rest.RestClient.head

    .. automethod:: restkit.rest.RestClient.delete

    .. automethod:: restkit.rest.RestClient.post

    .. automethod:: restkit.rest.RestClient.put

    .. automethod:: restkit.rest.RestClient.request

Response class
--------------

.. autoclass:: restkit.httpc.HTTPResponse

    **Properties**

    .. attribute:: body

        str body
        
    .. attribute:: body_file

        a `fileobject` instance
        
    .. attribute:: unicode_body
    
        body as unicode
        
    .. attribute:: status_int
    
        the status code of the response
        
    .. attribute:: status
    
        the status of the response
        
    .. attribute:: headers
    
        headers of response as dict
        
    .. attribute:: headerslist
    
        headers of response as list

    .. describe:: charset
        
        By default it's 'utf8', it define charset to convert in unicode_body_

Example : 

    >>> from restkit import Resource
    >>> res = Resource('http://friendpaste.com')
    >>> resp = res.get('/5rOqE9XTz7lccLgZoQS4IP',headers={'Accept': 'application/json'})
    >>> resp.status_int
    200
    >>> resp.status
    '200 OK'
    >>> resp.version
    11
    >>> resp.headers
    {'content-length': '111', 'set-cookie': 'FRIENDPASTE_SID=c025e3e1b0a63b60fed6edbe782f9fdae17eb2dd; expires=Mon, 21-Dec-2009 14:34:03 GMT; Max-Age=1209600; Path=/', 'server': 'nginx/0.7.62', 'connection': 'keep-alive', 'date': 'Mon, 07 Dec 2009 14:34:03 GMT', 'content-type': 'application/json'}
    >>> resp.headerslist
    [('content-length', '111'), ('set-cookie', 'FRIENDPASTE_SID=c025e3e1b0a63b60fed6edbe782f9fdae17eb2dd; expires=Mon, 21-Dec-2009 14:34:03 GMT; Max-Age=1209600; Path=/'), ('server', 'nginx/0.7.62'), ('connection', 'keep-alive'), ('date', 'Mon, 07 Dec 2009 14:34:03 GMT'), ('content-type', 'application/json')]
    >>> resp.unicode_body
    u'{"snippet": "hi!", "title": "", "id": "5rOqE9XTz7lccLgZoQS4IP", "language": "text", "revision": "386233396230"}'

